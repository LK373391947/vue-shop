{"remainingRequest":"C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\src\\components\\item.vue?vue&type=style&index=0&id=186c01a3&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\src\\components\\item.vue","mtime":1594627432862},{"path":"C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\骆猹\\Desktop\\外卖\\商家后台\\前端\\waimai\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNvbnRhaW5lciB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIC5oZWFkZXIgew0KICAgIHdpZHRoOiA5NSU7DQogICAgbWFyZ2luOiAyMHB4Ow0KICB9DQogIC5tYWluIHsNCiAgICB3aWR0aDogOTUlOw0KICAgIG1hcmdpbjogMjBweDsNCiAgfQ0KfQ0K"},{"version":3,"sources":["item.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"item.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <el-card class=\"header\">\r\n      <el-button type=\"primary\" round @click=\"addDialogVisible=true\">添加商品</el-button>\r\n    </el-card>\r\n    <el-card class=\"main\">\r\n      <el-table :data=\"tableData\" stripe style=\"width: 100%\">\r\n        <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n        <el-table-column prop=\"price\" label=\"单价\"></el-table-column>\r\n        <el-table-column prop=\"describe\" label=\"商品描述\"></el-table-column>\r\n        <el-table-column prop=\"category\" label=\"类别\"></el-table-column>\r\n        <el-table-column prop=\"number\" label=\"销量\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"updateItem(scope.row)\">编辑</el-button>\r\n            <el-button size=\"mini\" type=\"danger\" @click=\"deleteItem(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <!-- 添加商品 -->\r\n    <el-dialog title=\"注册\" :visible.sync=\"addDialogVisible\" width=\"30%\">\r\n      <el-form ref=\"addformRef\" :model=\"addForm\" :rules=\"addFormRules\">\r\n        <!-- 名称 -->\r\n        <el-form-item prop=\"name\">\r\n          <el-input v-model=\"addForm.name\" placeholder=\"请输入名称\"></el-input>\r\n        </el-form-item>\r\n        <!-- 价格 -->\r\n        <el-form-item prop=\"price\">\r\n          <el-input v-model=\"addForm.price\" placeholder=\"请输入价格\"></el-input>\r\n        </el-form-item>\r\n        <!-- 描述 -->\r\n        <el-form-item prop=\"describe\">\r\n          <el-input\r\n            v-model=\"addForm.describe\"\r\n            placeholder=\"请输入描述\"\r\n            type=\"textarea\"\r\n            :autosize=\"{ minRows: 3}\"\r\n            maxlength=\"100\"\r\n            show-word-limit\r\n            resize=\"none\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <!-- 类别 -->\r\n        <el-form-item prop=\"category\">\r\n          <el-select v-model=\"addForm.category\" placeholder=\"请选择商品的种类\">\r\n            <el-option\r\n              v-for=\"item in options\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.label\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"addQuit\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addItem\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  created() {\r\n    this.addForm.shopname = window.sessionStorage.getItem(\"shopname\");\r\n    this.getItem();\r\n  },\r\n  data() {\r\n    return {\r\n      //商品的列表\r\n      //基本属性：名称和单价\r\n      tableData: [],\r\n      //添加商品的可视参数\r\n      addDialogVisible: false,\r\n      //提交表单对象\r\n      addForm: {\r\n        shopname: \"\",\r\n        name: \"\",\r\n        price: 0,\r\n        describe: \"\",\r\n        category: \"\",\r\n        number: 0\r\n      },\r\n      //种类\r\n      options: [\r\n        {\r\n          value: 1,\r\n          label: \"主食\"\r\n        },\r\n        {\r\n          value: 2,\r\n          label: \"小吃\"\r\n        },\r\n        {\r\n          value: 3,\r\n          label: \"饮品\"\r\n        }\r\n      ],\r\n      //添加规则\r\n      addFormRules: {\r\n        name: [{ required: true, message: \"请输入名称\", trigger: \"blur\" }],\r\n        price: [{ required: true, message: \"请输入价格\", trigger: \"blur\" }],\r\n        describe: [{ required: true, message: \"请输入描述\", trigger: \"blur\" }],\r\n        category: [\r\n          { required: true, message: \"请选择商品种类\", trigger: \"blur\" }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    //获取商品列表\r\n    async getItem(){\r\n      let shopname=window.sessionStorage.getItem(\"shopname\")\r\n      const {data:result}=await this.$http.get('/getItem',{params:{shopname:shopname}});\r\n      console.log(result);\r\n      if(result.length==0)return this.$message.error(\"暂无数据\");\r\n      \r\n      this.tableData=result;\r\n    },\r\n    //更新商品\r\n    updateItem(value) {\r\n      console.log(value);\r\n    },\r\n    //删除商品\r\n    deleteItem(value){},\r\n    //退出添加商品对话框\r\n    addQuit() {\r\n      this.addDialogVisible = false;\r\n      this.$refs.addformRef.resetFields();\r\n    },\r\n    //添加商品\r\n    addItem() {\r\n      this.$refs.addformRef.validate(async valid => {\r\n        if (!valid) return;\r\n        const { data: result } = await this.$http.post(\r\n          \"/addItem\",\r\n          this.addForm\r\n        );\r\n        if (result == \"error\") return this.$message.error(\"添加失败\");\r\n        this.$message.success(\"添加成功\");\r\n        this.addDialogVisible = false;\r\n        this.$refs.addformRef.resetFields();\r\n        await this.getItem();\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n  height: 100%;\r\n  .header {\r\n    width: 95%;\r\n    margin: 20px;\r\n  }\r\n  .main {\r\n    width: 95%;\r\n    margin: 20px;\r\n  }\r\n}\r\n</style>"]}]}